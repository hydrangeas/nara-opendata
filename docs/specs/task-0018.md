# [タスク番号0018]: 認証ミドルウェアの実装

## 説明
Fastifyの認証ミドルウェアを実装する。JWTトークンの検証、AuthenticatedUserオブジェクトの生成、リクエストコンテキストへの認証情報の設定を行う。

## タスク種別
- [x] 機能実装
- [ ] バグ修正
- [ ] リファクタリング
- [ ] テスト
- [ ] ドキュメント
- [ ] 調査

## 優先度
高

## 見積もり工数
[ストーリーポイント: 2] (約0.5日)

## 依存関係
- 前提タスク: #0012, #0016
- 関連タスク: なし

## 受け入れ基準
- [ ] 認証プラグインが実装されている
- [ ] Authorizationヘッダーからトークンを抽出する機能が実装されている
- [ ] preHandlerフックでトークン検証が実行される
- [ ] 認証成功時にrequest.userにAuthenticatedUserが設定される
- [ ] 認証失敗時に401エラーが返される
- [ ] publicルート（ヘルスチェック等）の除外設定が実装されている
- [ ] TypeScriptの型拡張が実装されている
- [ ] 単体テストが作成されている

## 技術的な詳細
- apps/api/src/plugins/authディレクトリに配置
- FastifyRequestインターフェースの拡張
- Bearer形式のトークン抽出
- 認証不要エンドポイントのホワイトリスト管理